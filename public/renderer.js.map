{"version":3,"file":"renderer.js","sources":["../src/renderer.ts"],"sourcesContent":["const _self = (self instanceof Worker) && self as Worker;\r\n\r\nonmessage = function(evt:MessageEvent) {\r\n    const {data: {coords, canvas}} = evt;        \r\n    // const gl = canvas.getContext(\"webgl\");\r\n    const {x, y, z} = coords;\r\n    const tileKey = [x,y,z].join(':');        \r\n    const ctx = canvas.getContext(\"2d\");\r\n    function render() {\r\n        // ... some drawing using the gl context ...\r\n        //requestAnimationFrame(render);\r\n        ctx.beginPath();\r\n        ctx.rect(0, 0, 255, 255);\r\n        ctx.moveTo(0, 0);\r\n        ctx.lineTo(255, 255);\r\n        ctx.moveTo(255, 0);\r\n        ctx.lineTo(0, 255);\r\n        ctx.stroke();\r\n\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = 'red';\r\n        ctx.arc(128, 128, 128, 0, Math.PI * 2, false);\r\n        // ctx.stroke();        \r\n        ctx.font = '25px serif';\r\n        let textMetrics = ctx.measureText(tileKey);\r\n\r\n        ctx.fillText(tileKey, 128 - textMetrics.width / 2, 100);\r\n        ctx.stroke();\r\n\r\n        // console.log('render', tileKey);\r\n        _self && _self.postMessage({\r\n            tileKey,\r\n            cmd: 'render',\r\n            res: 'done'\r\n        });\r\n    }\r\n    requestAnimationFrame(render);     \r\n};\r\n\r\n"],"names":["_self","self","Worker","onmessage","evt","data","coords","canvas","x","y","z","tileKey","join","ctx","getContext","render","beginPath","rect","moveTo","lineTo","stroke","strokeStyle","arc","Math","PI","font","textMetrics","measureText","fillText","width","postMessage","cmd","res","requestAnimationFrame"],"mappings":";;;IAAA,IAAMA,KAAK,GAAIC,IAAI,YAAYC,MAAjB,IAA4BD,IAA1C;;IAEAE,SAAS,GAAG,mBAASC,GAAT,EAA2B;IAAA,kBACFA,GADE,CAC5BC,IAD4B;IAAA,MACrBC,MADqB,aACrBA,MADqB;IAAA,MACbC,MADa,aACbA,MADa;;IAAA,MAG5BC,CAH4B,GAGjBF,MAHiB,CAG5BE,CAH4B;IAAA,MAGzBC,CAHyB,GAGjBH,MAHiB,CAGzBG,CAHyB;IAAA,MAGtBC,CAHsB,GAGjBJ,MAHiB,CAGtBI,CAHsB;IAInC,MAAMC,OAAO,GAAG,CAACH,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAQE,IAAR,CAAa,GAAb,CAAhB;IACA,MAAMC,GAAG,GAAGN,MAAM,CAACO,UAAP,CAAkB,IAAlB,CAAZ;;IACA,WAASC,MAAT,GAAkB;IACd;IACA;IACAF,IAAAA,GAAG,CAACG,SAAJ;IACAH,IAAAA,GAAG,CAACI,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,GAAf,EAAoB,GAApB;IACAJ,IAAAA,GAAG,CAACK,MAAJ,CAAW,CAAX,EAAc,CAAd;IACAL,IAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgB,GAAhB;IACAN,IAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgB,CAAhB;IACAL,IAAAA,GAAG,CAACM,MAAJ,CAAW,CAAX,EAAc,GAAd;IACAN,IAAAA,GAAG,CAACO,MAAJ;IAEAP,IAAAA,GAAG,CAACG,SAAJ;IACAH,IAAAA,GAAG,CAACQ,WAAJ,GAAkB,KAAlB;IACAR,IAAAA,GAAG,CAACS,GAAJ,CAAQ,GAAR,EAAa,GAAb,EAAkB,GAAlB,EAAuB,CAAvB,EAA0BC,IAAI,CAACC,EAAL,GAAU,CAApC,EAAuC,KAAvC,EAbc;;IAedX,IAAAA,GAAG,CAACY,IAAJ,GAAW,YAAX;IACA,QAAIC,WAAW,GAAGb,GAAG,CAACc,WAAJ,CAAgBhB,OAAhB,CAAlB;IAEAE,IAAAA,GAAG,CAACe,QAAJ,CAAajB,OAAb,EAAsB,MAAMe,WAAW,CAACG,KAAZ,GAAoB,CAAhD,EAAmD,GAAnD;IACAhB,IAAAA,GAAG,CAACO,MAAJ,GAnBc;;IAsBdpB,IAAAA,KAAK,IAAIA,KAAK,CAAC8B,WAAN,CAAkB;IACvBnB,MAAAA,OAAO,EAAPA,OADuB;IAEvBoB,MAAAA,GAAG,EAAE,QAFkB;IAGvBC,MAAAA,GAAG,EAAE;IAHkB,KAAlB,CAAT;IAKH;;IACDC,EAAAA,qBAAqB,CAAClB,MAAD,CAArB;IACH,CAnCD;;;;;;"}